<meta charset="UTF-8">
<script>
    /*
    Problema: Pesquisa de Idade
    Foi feita uma pesquisa entre os habitantes de uma região. Foram coletados os dados de idade, sexo (M/F) e salário. Faça um programa que calcule e mostre:

    a) A média dos salários do grupo;
    b) A maior e a menor idade do grupo;
    c) A quantidade de mulheres na região;
    d) A idade e o sexo da pessoa que possui o menor salário;

    Finalize a entrada de dados ao ser digitada uma idade negativa.
    */

    //Entrada
    let i = 0;
    let soma = 0;
    let listaIdade = [];
    let contadorMulher = 0;
    let menorSalario = 9992424924294294;
    let listaMenorSalario = [];
    let listaSexoMenorSalario = [];
    let listaIdadeMenorSalario = [];
    let listaIdadeIgual = [];
    let sexoIgual = [];
    let listaSalarioIgual = [];
    let contador = 0;
    let media = 0;

    while (true) {
        let idade = new Date().getFullYear() - Number(prompt('Digite o seu ano de nascimento: '));
        if (idade < 0) {
            console.log('Idade negativa detectada!');
            break
        }
        let sexo = prompt('Digite o seu sexo [M|F]: ').trim().toUpperCase();
        if (sexo == 'M') {
            sexo = 'MASCULINO';
        }
        else if (sexo == 'F' || sexo == 'FEMININO') {
            sexo = 'FEMININO';
            contadorMulher++;
        }
        let salario = Number(prompt("Digite o seu salário: ").replace(',', '.'));
        if (menorSalario >= salario) {
            menorSalario = salario;
            listaMenorSalario.push(menorSalario);
            listaSexoMenorSalario.push(sexo);
            listaIdadeMenorSalario.push(idade);
            if (menorSalario == listaMenorSalario[i - 1]) {
                listaIdadeIgual.push(idade, listaIdadeMenorSalario[i - 1]);
                sexoIgual.push(sexo, listaSexoMenorSalario[i - 1]);
                listaSalarioIgual.push(salario);    
                contador++;
            }
            else if (contador >= 1 && menorSalario < listaIdadeMenorSalario[i - 1]){
                for (n of listaIdadeIgual) {listaIdade.pop(n);}
                for (n  of sexoIgual) {sexoIgual.pop(n);}
                for (n of listaSexoMenorSalario) {listaSalarioIgual.pop(n);}
                contador = 0;
            }
        }
        i++;
        soma += salario;
        media = soma / i;
        listaIdade.push(idade);
        let continuar = prompt('Digite "S" se desejar continuar ou "N" para parar o programa: ').trim().toUpperCase().replace('NÃO', 'N');
        if (continuar == 'N') {
            break;
        }
    }
    listaIdade.sort(function (a, b) {return (a - b)});

    if (listaSalarioIgual.length == 0) {
        alert(`Existe(m) ${contadorMulher} mulher(es) na região\nA menor idade do grupo é ${listaIdade[0]} ano(s) e a maior idade do grupo é ${listaIdade[listaIdade.length - 1]} ano(s)\nA média dos salários do grupo é R$ ${(media.toFixed(2)).replace('.', ',')} \nA idade da pessoa que possui o menor salário é ${listaIdadeMenorSalario[listaIdadeMenorSalario.length - 1]} anos e o sexo é ${listaSexoMenorSalario[listaSexoMenorSalario.length - 1]}`);
    } 
    else {
        alert(`Existe(m) ${contadorMulher} mulher(es) na região\nA menor idade do grupo é ${listaIdade[0]} ano(s) e a maior idade do grupo é ${listaIdade[listaIdade.length - 1]} ano(s)\nA média dos salários do grupo é R$ ${(media.toFixed(2)).replace('.', ',')} `);
        for (n of listaIdadeIgual) {document.write(`<li>Idade das pessoas que possuem o salários iguais: ${n} anos</li>`);}
        for (o of sexoIgual) {document.write(`<li>Sexo das pessoas que possuem o salários iguais: ${o} anos</li>`);}   
    }
    
    




    //

</script>